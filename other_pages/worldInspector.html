
<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
	<link href="../src/output.css" rel="stylesheet">
	<link rel="stylesheet" href="../wasm/highlight/styles/atom-one-dark.css" / >
    <script src="../wasm/highlight/highlight.js"></script>
	<script src="../js/navigatePages.js"></script>
  </head>

	<body class = "bg-neutral-800 justify-center flex">

			<div class = " text-center ">
				<div class = "p-2">
				</div>
				<nav class = "align-middle py-400  ">
					<button onclick="navigateToIndex()" class= "justify-center bg-neutral-700 text-white px-4 py-2 rounded hover:bg-neutral-800 focus:outline-none focus:ring focus:border-blue-300">Home</button>
					<button onclick="navigateToAbout()" class= "justify-center bg-neutral-700 text-white px-4 py-2 rounded hover:bg-neutral-800 focus:outline-none focus:ring focus:border-blue-300">About</button>
				</nav>
				<div class = "p-2">
				</div>
				<div class = "p-2 text-center bg-neutral-800 text-white font-bold select-none">
					World Inspector
				</div>

				<div class = "p-2">
				</div>
				<div class = "bg-neutral-900 text-left space-y-10 rounded-xl ">
					<div  style = "width:800px;height:400px; background-color: bg_slate-700;  padding: 0px;       justify-content: center;justify-items: left;   border-radius: 10px;" >
						<canvas id="bevy-portal" tabindex="0" data-raw-handle="1" width="0" height="0" alt="bevy" cursor="auto" style="width: 800px; height: 400px;justify-self: center;    border-radius: 10px; "></canvas>
						<div class = "ps-0 text-left bg-neutral-800 text-gray-500 select-none">
							This is an example of using World Inspector to debug objects in the scene
						</div>
						<div class = "p-2">
						</div>

						<div>

					<!--<canvas class="bevy-instance__canvas" id="bevy" width="1119" height="633" tabindex="0" data-raw-handle="1" alt="App" cursor="auto" style="width: 500.01px; height: 660.995px; aspect-ratio: 1.77826 / 1;"></canvas>
					-->	

						<div class ="text-xs  rounded-md text-left select-none">
							<pre name="source" id="source1" ><code id="source" class="rust">
use std::f32::consts::PI;
use std::time::Duration;

use bevy::diagnostic::{DiagnosticsStore, FrameTimeDiagnosticsPlugin, LogDiagnosticsPlugin};
use bevy::window::{CursorGrabMode, PresentMode, WindowLevel, WindowTheme};
use bevy::{animation::RepeatAnimation, pbr::CascadeShadowConfigBuilder, prelude::*};
use bevy_inspector_egui::quick::WorldInspectorPlugin;
fn main() {
	App::new()
		.add_plugins((DefaultPlugins.set(WindowPlugin {
			primary_window: Some(Window {
				title: "I am a window!".into(),
				resolution: (1024., 576.).into(),
				present_mode: PresentMode::AutoVsync,
				canvas: Some("#bevy-portal".to_string()),
				// Tells wasm to resize the window according to the available canvas
				fit_canvas_to_parent: true,
				// Tells wasm not to override default event handling, like F5, Ctrl+R etc.
				prevent_default_event_handling: false,

				window_theme: Some(WindowTheme::Dark),
				enabled_buttons: bevy::window::EnabledButtons {
					maximize: false,
					..Default::default()
				},
				// This will spawn an invisible window
				// The window will be made visible in the make_visible() system after 3 frames.
				// This is useful when you want to avoid the white window that shows up before the GPU is ready to render the app.
				visible: true,
				..default()
			}),
			..default()
		}),))
		.add_plugins(WorldInspectorPlugin::new())
		.add_systems(Startup, setup)
		.add_systems(Update, move_coin)
		.run();
}

#[derive(Component)]
struct HandState {}

fn setup(mut commands: Commands, asset_server: Res<AssetServer>) {
	// Insert a resource with the current scene information
	commands.spawn((
		SceneBundle {
			scene: asset_server.load("test02.gltf#Scene0"),
			..default()
		},
		HandState {},
	));

	// Camera
	commands.spawn((
		Camera3dBundle {
			transform: Transform::from_xyz(-34.8, 173.9, 482.1)
				.looking_at(Vec3::new(0.0, 173.9, 0.0), Vec3::Y),
			..default()
		},
		EnvironmentMapLight {
			diffuse_map: asset_server.load("pisa_diffuse_rgb9e5_zstd.ktx2"),
			specular_map: asset_server.load("pisa_specular_rgb9e5_zstd.ktx2"),
		},
	));

	// Light
	commands.spawn(DirectionalLightBundle {
		transform: Transform::from_rotation(Quat::from_euler(EulerRot::ZYX, 0.0, 1.0, -PI / 4.)),
		directional_light: DirectionalLight {
			shadows_enabled: true,
			..default()
		},
		cascade_shadow_config: CascadeShadowConfigBuilder {
			first_cascade_far_bound: 200.0,
			maximum_distance: 400.0,
			..default()
		}
		.into(),
		..default()
	});
}

fn move_coin(mut coins: Query<(&mut Transform, &mut HandState)>, timer: Res<Time>) {
	for (mut transform, coin) in &mut coins {
		transform.rotate_y(timer.delta_seconds() * -1.0);
	}
}
								
							</code></pre>


						<script lang="javascript">
							var source1 = document.getElementById('source1')
							hljs.highlightElement(source1);
						</script>
						</div>
						<div class = "p-2">
						</div>

					</div>
			</div>	
	</body>
  <script type="module">
  	import init from '../wasm/target/hand.js';
	init()
  </script>

</html>
